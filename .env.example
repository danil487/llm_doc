# ===== Настройки загрузки =====
FORCE_RELOAD=false
SKIP_LOAD=false
ENABLE_PERIODIC_SYNC=true

# ===== ChromaDB =====
CHROMA_DB_PATH=/app/data/chroma_db
CHROMA_COLLECTION=confluence_index

# ===== Confluence =====
CONFLUENCE_URL=https://confluence.infodev.ru
CONFLUENCE_USERNAME=pianov@infodev.ru
CONFLUENCE_API_KEY=....
CONFLUENCE_SPACE_NAME=ROAD

# ===== Ollama =====
OLLAMA_MODEL=llama3.1
OLLAMA_HOST=http://ollama:11434

# ===== Redis =====
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_TTL_SECONDS=3600

# ===== RAG Pipeline: Настраиваемые параметры =====
# Поиск: сколько чанков возвращать на первом этапе (recall)
RETRIEVAL_TOP_K=20

# Ранжирование: сколько чанков оставить после rerank (precision)
RERANK_TOP_K=5

# Порог релевантности для reranker (0.0-1.0)
RERANK_MIN_SCORE=0.3

# Модель reranker (cross-encoder)
RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# Промпт: максимальная длина контекста в токенах (защита от переполнения)
MAX_CONTEXT_TOKENS=2048

# Промпт: включать ли заголовки разделов в контекст
INCLUDE_SECTION_IN_PROMPT=true

# Ответ: форматирование (markdown | plain | html)
RESPONSE_FORMAT=markdown

# Ответ: показывать ссылки даже если LLM их не упомянул
ALWAYS_SHOW_SOURCES=true

# Ответ: максимальное количество ссылок в ответе
MAX_SOURCE_LINKS=3

# ===== Логирование =====
LOG_LEVEL=INFO
PYTHONUNBUFFERED=1
TOKENIZERS_PARALLELISM=true

# ===== Telegram Bot =====
TELEGRAM_ENABLED=true
TELEGRAM_BOT_TOKEN=7458929418:AAFNTdDSvZxr7UHK0APEXBdtqiHXXCTEcQo
TELEGRAM_WEBHOOK_URL=
TELEGRAM_WEBHOOK_PORT=8443
# ‚öôÔ∏è –¢–∞–±–ª–∏—Ü–∞ –≤–ª–∏—è–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∑–∞–ø—É—Å–∫–∞ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –î–∏–∞–ø–∞–∑–æ–Ω / –í–∞—Ä–∏–∞–Ω—Ç—ã | –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–∏—Å–∫ | –í–ª–∏—è–Ω–∏–µ –Ω–∞ –æ—Ç–≤–µ—Ç | –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å | –ö–æ–≥–¥–∞ –º–µ–Ω—è—Ç—å |
|----------|----------------------|-------------------|-----------------|-----------------|-------------------|--------------|
| **`RETRIEVAL_TOP_K`** | `20` | `5` ‚Äì `100` | üîç –ë–æ–ª—å—à–µ = –≤—ã—à–µ –ø–æ–ª–Ω–æ—Ç–∞ (recall), –Ω–æ –±–æ–ª—å—à–µ —à—É–º–∞ | üìù –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Üí —Ä–∏—Å–∫ "–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏" LLM | ‚è±Ô∏è –õ–∏–Ω–µ–π–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ (–±–æ–ª—å—à–µ —á–∞–Ω–∫–æ–≤ ‚Üí –±–æ–ª—å—à–µ rerank) | ‚Üë –ø—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö, ‚Üì –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ |
| **`RERANK_TOP_K`** | `5` | `0` ‚Äì `20` | üéØ –ë–æ–ª—å—à–µ = —Ç–æ—á–Ω–µ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –¥–æ—Ä–æ–∂–µ | üìù –ë–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚Üí –ª—É—á—à–µ –æ—Ç–≤–µ—Ç—ã | ‚è±Ô∏è Cross-encoder: ~50-200ms/—á–∞–Ω–∫ ‚Üí —Å–∏–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç | ‚Üë –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞, `0` –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ (–æ—Ç–∫–ª—é—á–∏—Ç—å rerank) |
| **`RERANK_MIN_SCORE`** | `0.3` | `0.0` ‚Äì `1.0` | üîç –í—ã—à–µ = —Å—Ç—Ä–æ–∂–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –º–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π | üìù –ú–µ–Ω—å—à–µ —à—É–º–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ ‚Üí —á–∏—â–µ –æ—Ç–≤–µ—Ç—ã | ‚è±Ô∏è –í—ã—à–µ –ø–æ—Ä–æ–≥ = –º–µ–Ω—å—à–µ —á–∞–Ω–∫–æ–≤ ‚Üí –±—ã—Å—Ç—Ä–µ–µ | ‚Üë –µ—Å–ª–∏ –º–Ω–æ–≥–æ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |
| **`RERANKER_MODEL`** | `cross-encoder/ms-marco-MiniLM-L-6-v2` | –°–º. [SBERT models](https://www.sbert.net/docs/pretrained_cross-encoders.html) | üîç –ö—Ä—É–ø–Ω–µ–µ –º–æ–¥–µ–ª—å = —Ç–æ—á–Ω–µ–µ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ | üìù –õ—É—á—à–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Üí —Ç–æ—á–Ω–µ–µ –æ—Ç–≤–µ—Ç—ã | ‚è±Ô∏è `MiniLM`: ~50ms/—á–∞–Ω–∫, `large`: ~300ms/—á–∞–Ω–∫ | –ú–µ–Ω—è–π –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ GPU –∏–ª–∏ –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ |
| **`MAX_CONTEXT_TOKENS`** | `2048` | `512` ‚Äì `8192` | ‚Äî | üìù –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ = –ø–æ–ª–Ω–µ–µ –æ—Ç–≤–µ—Ç—ã, –Ω–æ —Ä–∏—Å–∫ "–ø–æ—Ç–µ—Ä–∏ —Ñ–æ–∫—É—Å–∞" LLM | ‚è±Ô∏è –ë–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ = –¥–æ–ª—å—à–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è + –≤—ã—à–µ –ø–∞–º—è—Ç—å | ‚Üë –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, ‚Üì –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ |
| **`INCLUDE_SECTION_IN_PROMPT`** | `true` | `true` / `false` | ‚Äî | üìù –° —Ä–∞–∑–¥–µ–ª–∞–º–∏ = —Ç–æ—á–Ω–µ–µ –ø—Ä–∏–≤—è–∑–∫–∞ –æ—Ç–≤–µ—Ç–∞ –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É | ‚è±Ô∏è –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ | `false` –µ—Å–ª–∏ —Ä–∞–∑–¥–µ–ª—ã –Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã |
| **`RESPONSE_FORMAT`** | `markdown` | `markdown` / `plain` / `html` | ‚Äî | üé® Markdown = —á–∏—Ç–∞–µ–º–æ—Å—Ç—å + —Å—Å—ã–ª–∫–∏; plain = —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å | ‚è±Ô∏è –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ | `plain` –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ –±–µ–∑ Markdown |
| **`ALWAYS_SHOW_SOURCES`** | `true` | `true` / `false` | ‚Äî | üîó –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ ‚Üí –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å | ‚è±Ô∏è –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ | `false` –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –º–µ—à–∞—é—Ç –≤ —á–∞—Ç–µ |
| **`MAX_SOURCE_LINKS`** | `3` | `1` ‚Äì `10` | ‚Äî | üîó –ë–æ–ª—å—à–µ —Å—Å—ã–ª–æ–∫ = –ø–æ–ª–Ω–æ—Ç–∞, –Ω–æ –º–æ–∂–µ—Ç –∑–∞–≥—Ä–æ–º–æ–∂–¥–∞—Ç—å | ‚è±Ô∏è –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ | ‚Üë –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ |

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≥–æ—Ç–æ–≤—ã–µ –ø—Ä–µ—Å–µ—Ç—ã)

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
```bash
# –î–ª—è –¥–µ–º–æ, —Ç–µ—Å—Ç–æ–≤, —Å–ª–∞–±—ã—Ö –º–∞—à–∏–Ω
RETRIEVAL_TOP_K=10
RERANK_TOP_K=0              # –æ—Ç–∫–ª—é—á–∏—Ç—å rerank
RERANK_MIN_SCORE=0.0
MAX_CONTEXT_TOKENS=1024
RESPONSE_FORMAT=plain
```
**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚ö° –û—Ç–≤–µ—Ç –∑–∞ 2-5 —Å–µ–∫ (vs 10-30 —Å–µ–∫ –≤ –ø–æ–ª–Ω–æ–º —Ä–µ–∂–∏–º–µ)
- üîç –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞: ~70% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞
- üìù –û—Ç–≤–µ—Ç—ã –∫–æ—Ä–æ—á–µ, –±–µ–∑ Markdown

---

### ‚öñÔ∏è –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```bash
# –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
RETRIEVAL_TOP_K=20
RERANK_TOP_K=5
RERANK_MIN_SCORE=0.3
MAX_CONTEXT_TOKENS=2048
RESPONSE_FORMAT=markdown
ALWAYS_SHOW_SOURCES=true
```
**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚è±Ô∏è –û—Ç–≤–µ—Ç –∑–∞ 8-15 —Å–µ–∫
- üîç –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞: ~95% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞
- üìù –ß–∏—Ç–∞–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã —Å —Å—Å—ã–ª–∫–∞–º–∏

---

### üéØ –ü—Ä–µ–º–∏—É–º-—Ä–µ–∂–∏–º (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
```bash
# –î–ª—è –≤–∞–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
RETRIEVAL_TOP_K=30
RERANK_TOP_K=7
RERANK_MIN_SCORE=0.2        # –º—è–≥—á–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
MAX_CONTEXT_TOKENS=3072
INCLUDE_SECTION_IN_PROMPT=true
RESPONSE_FORMAT=markdown
MAX_SOURCE_LINKS=5
```
**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚è±Ô∏è –û—Ç–≤–µ—Ç –∑–∞ 15-40 —Å–µ–∫
- üîç –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞: ~100%
- üìù –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ —Å—Å—ã–ª–∫–∞–º–∏

---

### üî¨ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (–æ—Ç–ª–∞–¥–∫–∞)
```bash
# –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
LOG_LEVEL=DEBUG
RERANK_TOP_K=0              # —Ç–µ—Å—Ç –±–µ–∑ rerank
# –∏–ª–∏
RERANKER_MODEL=cross-encoder/ms-marco-Multi-QA-mpnet-base-cos-v1  # –¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å
MAX_CONTEXT_TOKENS=512      # —Ç–µ—Å—Ç —Å –∫–æ—Ä–æ—Ç–∫–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
```
**–≠—Ñ—Ñ–µ–∫—Ç:**
- üêõ –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- üîç –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

---

## üìà –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞ vs –°–∫–æ—Ä–æ—Å—Ç—å
```
–ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞ (precision@5)
   ‚ñ≤
100%‚îÇ              ‚óè –ü—Ä–µ–º–∏—É–º
    ‚îÇ           ‚óè
 90%‚îÇ        ‚óè –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
    ‚îÇ     ‚óè
 80%‚îÇ  ‚óè
    ‚îÇ‚óè –ë—ã—Å—Ç—Ä—ã–π
 70%‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –°–∫–æ—Ä–æ—Å—Ç—å (–∑–∞–ø—Ä–æ—Å/—Å–µ–∫)
     0.5    1    2    5    10
```

### –î–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ vs –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–∞
```
–ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–∞ (–æ—Ü–µ–Ω–∫–∞ 1-10)
   ‚ñ≤
 10‚îÇ           ‚óè
   ‚îÇ         ‚óè
  8‚îÇ       ‚óè   ‚Üê –û–ø—Ç–∏–º—É–º (~2048 —Ç–æ–∫–µ–Ω–æ–≤)
   ‚îÇ     ‚óè
  6‚îÇ   ‚óè
   ‚îÇ ‚óè
  4‚îÇ‚óè
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ MAX_CONTEXT_TOKENS
     512  1024  2048  4096  8192
          ‚ö†Ô∏è –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º—É–º–∞ ‚Äî —É—Ö—É–¥—à–µ–Ω–∏–µ (LLM "—Ç–µ—Ä—è–µ—Ç—Å—è")
```

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
chmod +x setup.sh start.sh stop.sh verify.sh

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ: CONFLUENCE_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
# OLLAMA_MODEL=llama3.1 (–æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫
```bash
# –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
./setup.sh

# –ó–∞–ø—É—Å–∫ (CPU)
./start.sh

# –ò–ª–∏ —Å GPU (–µ—Å–ª–∏ –µ—Å—Ç—å NVIDIA)
./start.sh --gpu
```

### –®–∞–≥ 3: –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑!)
```bash
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º:
docker-compose logs -f ollama

# –ò—â–∏—Ç–µ:
# "pulling manifest" ‚Üí –Ω–∞—á–∞–ª–æ
# "pulling ...: XX%" ‚Üí –ø—Ä–æ–≥—Ä–µ—Å—Å (~4.7 –ì–ë)
# "success" ‚Üí –≥–æ—Ç–æ–≤–æ ‚úÖ

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ API:
watch -n 10 'curl -s http://localhost:11434/api/tags | jq'
# –ö–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è: {"models":[{"name":"llama3.1:..."}]} ‚Üí –º–æ–¥–µ–ª—å –≥–æ—Ç–æ–≤–∞
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
./verify.sh

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
docker exec -it llm-retrieval-app bash
python3 main.py

# –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã:
> –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ API?
```

---

## ‚ôªÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏

```
üì¶ Docker volume "ollama-data" –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ /root/.ollama –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:
[1] –ú–æ–¥–µ–ª—å —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∏–∑ ollama.com ‚Üí /root/.ollama/models/
[2] –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ volume "ollama-data" –Ω–∞ —Ö–æ—Å—Ç–µ
[3] –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏: –º–æ–¥–µ–ª—å –±–µ—Ä—ë—Ç—Å—è –∏–∑ volume, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –Ω–µ –Ω—É–∂–Ω–æ!

üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ volume:
docker volume ls | grep ollama
docker volume inspect enhanced-llm-retrieval_ollama-data

üíæ –ë—ç–∫–∞–ø –º–æ–¥–µ–ª–∏:
mkdir -p ~/ollama-backup
docker run --rm -v ollama-data:/source -v ~/ollama-backup:/backup alpine \
  tar -czf /backup/ollama.tar.gz -C /source .
```

> ‚úÖ **–ú–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏** ‚Äî —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!

---

## üéØ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏ Ollama

```bash
# –í .env —É–∫–∞–∂–∏—Ç–µ –æ–¥–Ω—É –∏–∑:

OLLAMA_MODEL=llama3.1        # ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è: –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞/—Å–∫–æ—Ä–æ—Å—Ç–∏
OLLAMA_MODEL=llama3          # –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è Llama
OLLAMA_MODEL=phi3            # –ë—ã—Å—Ç—Ä–∞—è, —Ö–æ—Ä–æ—à–∞ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
OLLAMA_MODEL=mistral         # –•–æ—Ä–æ—à–∞ –¥–ª—è –∫–æ–¥–∞
OLLAMA_MODEL=tinyllama       # –î–ª—è —Ç–µ—Å—Ç–æ–≤ / —Å–ª–∞–±–æ–≥–æ CPU (~600 –ú–ë)

# –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: https://ollama.com/library
```

---

## üõ†Ô∏è Troubleshooting

```bash
# üîç Ollama –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
docker-compose logs ollama | tail -50

# üîç –ú–æ–¥–µ–ª—å –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
docker-compose exec ollama ollama pull llama3.1  # –≤—Ä—É—á–Ω—É—é

# üîç ChromaDB –æ—à–∏–±–∫–∞
docker-compose exec app ls -la /app/data/chroma_db/

# üîç –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
./stop.sh --down
docker system prune -f
docker-compose build --no-cache
./start.sh

# üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats  # –ø–∞–º—è—Ç—å/CPU –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
df -h /var/lib/docker  # –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

```
[ ] ./setup.sh –≤—ã–ø–æ–ª–Ω–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
[ ] .env —Å–æ–¥–µ—Ä–∂–∏—Ç CONFLUENCE_API_KEY –∏ CONFLUENCE_URL
[ ] ./start.sh –∑–∞–ø—É—Å—Ç–∏–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
[ ] docker ps –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: app (Up), ollama (healthy), redis (healthy)
[ ] curl http://localhost:11434/api/tags –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–¥–µ–ª—å
[ ] ./verify.sh –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ ‚úÖ
[ ] docker exec -it llm-retrieval-app python3 main.py ‚Üí –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
[ ] –¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—É—á–∞–µ—Ç –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
```

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫**: –≤—ã–¥–µ–ª–∏—Ç–µ 15-30 –º–∏–Ω—É—Ç –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (~4.7 –ì–ë)
2. **RAM**: –¥–ª—è `llama3.1` –Ω–∞ CPU –Ω—É–∂–Ω–æ 8-12 –ì–ë —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏
3. **–î–∏—Å–∫**: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å 10+ –ì–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –≤ `/var/lib/docker`
4. **–ë—ç–∫–∞–ø**: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∫–æ–ø–∏—Ä—É–π—Ç–µ volume `chroma-data` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞
5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ Confluence –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω–∫ –∑–∞–Ω–æ–≤–æ

---

> ‚úÖ **–ì–æ—Ç–æ–≤–æ!** –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –º–æ–¥–µ–ª—å –∫—ç—à–∏—Ä—É–µ—Ç—Å—è, ChromaDB —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, healthcheck'–∏ –Ω–∞–¥—ë–∂–Ω—ã. –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–µ–Ω –∏ –±–µ–∑–æ–ø–∞—Å–µ–Ω.

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ø—Ä–∏—à–ª–∏—Ç–µ –≤—ã–≤–æ–¥ `./verify.sh` –∏ `docker-compose logs app`, –ø–æ–º–æ–≥—É –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å! üöÄüõ†Ô∏è